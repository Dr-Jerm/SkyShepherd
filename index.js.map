{"version":3,"sources":["webpack:///./app/app.js","webpack:///./app/game/Scene1.js","webpack:///./app/game/vr-controller.js","webpack:///./app/game/Game.js","webpack:///./app/util/MathHelpers.js","webpack:///./app/core/Actor.js","webpack:///./app/game/Sheep.js","webpack:///./app/game/FSM.js","webpack:///./app/game/Skybox.js","webpack:///./app/game/GroundPlane.js","webpack:///./app/game/Pen.js","webpack:///./app/game/DynamicSign.js","webpack:///./app/game/RipplePlane.js","webpack:///./app/game/shaders/waves.vert","webpack:///./app/game/shaders/waves.frag","webpack:///./app/game/Scene2.js","webpack:///./app/game/Physics.js","webpack:///./app/game/Sign.js"],"names":["WEBVR","isAvailable","scene","webGLRenderer","vrRenderer","renderer","init","container","document","createElement","body","appendChild","THREE","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setSize","innerWidth","innerHeight","shadowMap","enabled","gammaInput","gammaOutput","domElement","VREffect","getButton","addEventListener","onWindowResize","time","delta","tick","requestAnimationFrame","now","Date","getTime","render","camera","aspect","updateProjectionMatrix","Scene1","controls","tickingActors","controller1","controller2","world","World","gravity","set","broadphase","NaiveBroadphase","solver","iterations","PerspectiveCamera","listener","AudioListener","add","HemisphereLight","light","DirectionalLight","position","rotation","VRControls","standing","push","game","skybox","groundPlane","object3D","ripplePlane","scale","pen","Vector3","scoreSign","y","setMessage","setNumber","visible","timeSign","timeRemaining","signs","sign_count","i","angle","Math","PI","x","cos","z","sin","numSheep","sheep","bPause","onkeyup","e","keyCode","console","log","length","name","physicsEnabled","key","sign","step","update","tickActors","Scene","actors","module","exports","Controller","index","showViveControllers","lastPosition","velocity","isAboveGround","isBelowGround","self","onTriggerDown","event","onTriggerUp","standingMatrix","getStandingMatrix","loader","OBJLoader","setPath","load","object","TextureLoader","controller","children","material","map","specularMap","clone","loader1","side","DoubleSide","mesh","_currentPosition","_diff","sub","multiplyScalar","checkWentBelowGround","matrix","matrixWorld","setFromMatrixPosition","raycaster","Raycaster","worldLocation","getWorldPosition","_ground","_intersects","intersectObject","impact","ViveController","transformPoint","vector","Game","score","gameStart","gameOver","initialized","initializedTime","initializedCount","impactConfig","scalar","yBaseForce","maxRange","forceThreshold","vector3ImpactLocation","floatScale","hand","beginGame","tickables","ticker","_objectPos","_distanceScale","abs","_force","normalize","force","Vec3","bump","impact_amt","acceptPunch","max","_secondsRemaining","floor","updateTime","MathHelpers","threeVec3ToCannonVec3","threeVec3","cannonVec3ToThreeVec3","cannonVec3","Actor","ticks","geometry","Object3D","constructor","mass","shape","hackyYOffset","lines","clearLines","syncCollisionBodyAndRenderable","min","random","_currentPos","_currentRot","_originVect","_fwdX","_fwdZ","forwardVect","copy","quaternion","remove","start","end","color","LineBasicMaterial","Geometry","vertices","_line","Line","val","Sheep","landedTimer","landedMax","totalScale","physicsScale","textures","texIndex","randRange","sheepMesh","castShadow","receiveShadow","Box","collisionMesh","Mesh","BoxGeometry","MeshBasicMaterial","wireframe","Body","addShape","bIsInPen","getRandStart","wanderRange","brain","setState","wander","bind","grazeTimer","newDestTimer","limitInState","randFloatRange","nextDestTimeRange","destinationRange","accel","speed","maxSpeed","rotationRate","targetPos","getNewTargetPos","addBody","_randValue","radius","_sheepPos","getPosition","_penPos","_dist","setPenned","incrementScore","updateTransform","checkIsInPen","_currentBodyPos","_distToCenter","angularVelocity","_rayCastOrigin","_currentHeight","checkIfLanded","forceVector","sourceVector","applyImpulse","_targetPos","_distance","distanceTo","graze","timeInState","getPenTargetPos","penned","_fwdVect","getForwardVector","_direction","_dotProd","dot","_theta","acos","_destDotProd","_destTheta","_yaw","_angleDif","_absDif","_finalRotRate","_velocity","clamp","_difference","randX","randZ","offset","newTarget","_penDir","_cPerpVect","_ccPerpVect","_newDir","_rad","draweLine","FSM","activeState","state","GroundPlane","CylinderGeometry","MeshStandardMaterial","roughness","metalness","Pen","center","penMesh1","penMesh2","penMesh3","_scale","DynamicSign","texture_idx","width","height","size","canvas","message","number","ctx","getContext","signMesh","materials","texture","Texture","needsUpdate","font","fillStyle","fillRect","textAlign","textBaseline","fillText","value","changeCanvas","RipplePlane","WIDTH","NUM_TEXELS","BOUNDS","BOUNDS_HALF","timeLeft","PlaneBufferGeometry","maxRippleSize","ShaderMaterial","uniforms","rippleOriginLeft","type","Vector2","rippleOriginRight","timeRight","rippleSizeLeft","rippleSizeRight","falloff","vertexShader","fragmentShader","island","computeFaceNormals","computeVertexNormals","punch_location","power","Scene2","setClearColor","OrbitControls","enableZoom","enableDamping","dampingFactor","shadow","top","bottom","right","left","mapSize","mouse","freezeFrameTimer","freezeFrameTime","_curPos","onmousemove","clientX","clientY","onmousedown","button","setFromCamera","_impactPoint","point","Physics","Sign","signTextures"],"mappings":"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","file":"index.js","sourcesContent":["/* global WEBVR */\n/* global THREE */\nimport Scene1 from './game/Scene1.js';\nimport Scene2 from './game/Scene2.js';\n\n\n\nif (WEBVR.isAvailable() === false) {\n  // document.body.appendChild(WEBVR.getMessage());\n}\n\nlet scene;\nlet webGLRenderer;\nlet vrRenderer;\nlet renderer;\n\nlet init = function () {\n\tlet container = document.createElement('div');\n\tdocument.body.appendChild(container);\n\t\n  \n  webGLRenderer = new THREE.WebGLRenderer({ antialias: true });\n  webGLRenderer.setPixelRatio(window.devicePixelRatio);\n  webGLRenderer.setSize(window.innerWidth, window.innerHeight);\n  webGLRenderer.shadowMap.enabled = true;\n  webGLRenderer.gammaInput = true;\n  webGLRenderer.gammaOutput = true;\n  container.appendChild(webGLRenderer.domElement);\n  if (WEBVR.isAvailable() === true) {\n    vrRenderer = new THREE.VREffect(webGLRenderer);\n    document.body.appendChild(WEBVR.getButton(vrRenderer));\n    renderer = vrRenderer;\n    scene = new Scene1(renderer);\n  } else {\n    renderer = webGLRenderer;\n    scene = new Scene2(renderer);\n  }\n  \n  window.addEventListener('resize', onWindowResize, false);\n};\n\nlet time;\nlet delta = 0;\nlet tick = function () {\n  if (WEBVR.isAvailable() === true) {\n    vrRenderer.requestAnimationFrame(tick);\n  } else {\n    window.requestAnimationFrame(tick);\n  }\n  let now = new Date().getTime();\n  delta = (now - (time || now))/1000;\n  time = now;\n  \n  if (delta > 0) {\n    scene.tick(delta);\n  }\n  \n  renderer.render(scene, scene.camera);\n};\n\nlet onWindowResize = function() {\n  scene.camera.aspect = window.innerWidth/window.innerHeight;\n  scene.camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n};\n\ninit();\ntick();\n\n\n\n// WEBPACK FOOTER //\n// ./app/app.js","/* global WEBVR */\n/* global THREE */\nimport CANNON from 'cannon';\nimport Controller from './vr-controller';\nimport Game from './Game';\nimport Skybox from './Skybox';\nimport GroundPlane from './GroundPlane';\nimport Pen from './Pen';\nimport Sheep from './Sheep';\nimport DynamicSign from './DynamicSign';\nimport Sign from './Sign';\nimport RipplePlane from './RipplePlane';\n\nclass Scene1 extends THREE.Scene {\n  constructor(renderer) {\n    super();\n    this.controls;\n    \n    this.tickingActors = [];\n    \n    let controller1;\n    let controller2;\n    \n    this.world = new CANNON.World();\n    this.world.gravity.set(0,-4.9,0);\n    this.world.broadphase = new CANNON.NaiveBroadphase();\n    this.world.solver.iterations = 10;\n    \n    let camera = new THREE.PerspectiveCamera(\n      70,\n      window.innerWidth/window.innerHeight,\n      0.1,\n      10000\n    );\n    var listener = new THREE.AudioListener();\n\t\tcamera.add( listener );\n    \n    this.add(camera);\n    \n    this.add(new THREE.HemisphereLight(0x808080, 0x606060));\n    var light = new THREE.DirectionalLight(0xffffff);\n    light.position.set(0, 6, 0);\n    light.rotation.set(2, 2, 5.0);\n    \n    // light.castShadow = true;\n    // // light.shadow.camera.zoom = 4;\n    // // light.shadow.camera.top = 2;\n    // // light.shadow.camera.bottom = -2;\n    // // light.shadow.camera.right = 2;\n    // // light.shadow.camera.left = -2;\n    \n    // // light.shadow.mapSize.set(4096, 4096);\n    this.add(light);\n    \n    this.camera = camera;\n    \n    this.controls = new THREE.VRControls(camera);\n    this.controls.standing = true;\n    \n    controller1 = new Controller(0, this.controls);\n    this.tickingActors.push(controller1);\n    this.add(controller1);\n    controller2 = new Controller(1, this.controls);\n    this.add(controller2);\n    this.tickingActors.push(controller2);\n    \n    window.game = new Game(this, this.world);\n    this.tickingActors.push(window.game);\n    \n    let skybox = new Skybox(this, this.world);\n    \n    // let sheep = new Sheep();\n    // this.add(sheep.object3D);\n    this.groundPlane = new GroundPlane(this, this.world);\n    this.groundPlane.object3D.position.set(0,1.7,0);\n    this.groundPlane.body.position.set(0,1.7,0);\n    \n    this.ripplePlane = new RipplePlane(this, this.world);\n    this.tickingActors.push(this.ripplePlane);\n    this.ripplePlane.object3D.position.set(0,2.2,0);\n    this.ripplePlane.object3D.scale.set(0.06,0.06,0.06);\n    \n    this.pen = new Pen(this, this.world, new THREE.Vector3(0,2.18,0));\n\n    this.scoreSign = new DynamicSign(this, this.world);    \n    this.scoreSign.object3D.position.set(-2.2,0,-5);   \n    this.scoreSign.object3D.rotation.y = 0.3\n    this.scoreSign.setMessage(\"Score\");\n    this.scoreSign.setNumber( 0 );\n    this.tickingActors.push(this.scoreSign);\n    this.scoreSign.visible = false;\n\n    this.timeSign = new DynamicSign(this, this.world);    \n    this.timeSign.object3D.position.set(2.5,0,-5);\n    this.timeSign.object3D.rotation.y = -0.2\n    this.timeSign.setMessage(\"Time\");\n    this.timeSign.setNumber(window.game.timeRemaining);\n    this.tickingActors.push(this.timeSign);\n    this.timeSign.visible = false;\n\n    this.signs = [];\n    var sign_count = 8;\n    for (var i = 0; i < 6; i++) {\n      this.signs[i] = new Sign(this, this.world, i);\n      var angle = -i * 2 * Math.PI / sign_count - Math.PI / 2;\n      this.signs[i].object3D.position.x = \n        8 * Math.cos(i * 2 * Math.PI / sign_count);\n      this.signs[i].object3D.position.z = \n        8 * Math.sin(i * 2 * Math.PI / sign_count);\n\n      this.signs[i].object3D.rotation.y = angle;\n    }\n\n\n    this.numSheep = 30;\n    for(var i=0; i<this.numSheep; i++)\n    {\n        var sheep = new Sheep(this, this.world);\n        sheep.object3D.position.y = 2.23;\n        this.tickingActors.push(sheep);\n    }    \n\n    this.bPause = false;\n    \n    document.body.onkeyup = function(e){\n      if(e.keyCode == 32){\n        console.log(\"I pressed spacebar\");\n        for (let i = 0; i < this.tickingActors.length; i++) \n        {\n          if(this.tickingActors[i].object3D.name == \"Sheep\")\n          {\n              this.tickingActors[i].physicsEnabled = !this.tickingActors[i].physicsEnabled;\n          }\n        }\n      }\n    }\n  }\n\n  beginGame() {\n        for (var key in this.signs) {\n            let sign = this.signs[key];\n            sign.object3D.visible = false;\n        }\n        this.scoreSign.object3D.visible = true;\n        this.timeSign.object3D.visible = true;\n    }\n  \n  tick (delta) {\n    // this.world.step(delta);\n    this.world.step(1/60);\n    this.controls.update();\n    tickActors(this.tickingActors, delta);\n  }\n}\n\nlet tickActors = function (actors, delta) {\n  for (let i = 0; i < actors.length; i++) {\n    if (actors[i].tick) {\n      actors[i].tick(delta);\n    }\n  }\n};\n\nmodule.exports = Scene1;\n\n\n// WEBPACK FOOTER //\n// ./app/game/Scene1.js","/* global WEBVR */\n/* global THREE */\n\nclass Controller extends THREE.ViveController  {\n  constructor(index, controls) {\n    super(index);\n    \n    this.index = index;\n    this.showViveControllers = false;\n    this.lastPosition = new THREE.Vector3();\n    this.velocity = new THREE.Vector3();\n    this.isAboveGround = false;\n    this.isBelowGround = true;\n    let self = this;\n    \n    \n    this.onTriggerDown = (event) => {\n      console.log(\"triggerDown \"+ this.index);\n      // var worldLocation = this.getWorldPosition();\n      // window.game.impact(worldLocation, this.velocity.length(), this.index ? \"right\" : \"left\");\n    };\n    this.onTriggerUp = (event) => {\n      console.log(\"triggerUp \"+ this.index);\n    };\n    \n    this.standingMatrix = controls.getStandingMatrix();\n    this.addEventListener('triggerdown', this.onTriggerDown);\n    this.addEventListener('triggerup', this.onTriggerUp);\n    \n    if (this.showViveControllers) {\n      var loader = new THREE.OBJLoader();\n      loader.setPath('./models/obj/vive-controller/');\n      \n      loader.load('vr_controller_vive_1_5.obj', function(object) {\n        var loader = new THREE.TextureLoader();\n        loader.setPath('./models/obj/vive-controller/');\n        \n        var controller = object.children[0];\n        controller.material.map = loader.load(\n          'onepointfive_texture.png'\n        );\n        controller.material.specularMap = loader.load(\n          'onepointfive_spec.png'\n        );\n        \n        self.add(object.clone());\n      });\n    } else {\n      var loader1 = new THREE.OBJLoader();\n      loader1.setPath('./models/obj/fist/');\n      \n      \n      loader1.load('fist.obj', function(object) {\n        var loader1 = new THREE.TextureLoader();\n        loader1.setPath('./models/obj/fist/');\n        \n        var controller = object.children[0];\n        controller.material.map = loader1.load(\n          'fistDiffuse.png'\n        );\n        controller.material.side = THREE.DoubleSide;\n        \n        let mesh = object.clone();\n        mesh.position.set(0, 0, 0.2);\n        mesh.rotation.set(-Math.PI/2, Math.PI,0);\n        mesh.scale.set(0.1,0.1,0.1);\n        if (self.index == 1) {\n          mesh.scale.x = mesh.scale.y * -1;\n        }\n        self.add(mesh);\n      });\n    }\n  }\n  \n  tick(delta) {\n    this.update();\n    \n    var _currentPosition = this.position;\n    var _diff = _currentPosition.clone().sub(this.lastPosition);\n    this.velocity = _diff.multiplyScalar(delta);\n    \n    this.lastPosition = this.position.clone();\n    \n    this.checkWentBelowGround();\n  }\n  \n  getWorldPosition() {\n    var matrix = this.matrixWorld;\n    return new THREE.Vector3().setFromMatrixPosition( matrix );\n  }\n  \n  checkWentBelowGround() {\n    let raycaster =  new THREE.Raycaster();\n    var worldLocation = this.getWorldPosition();\n    raycaster.set(worldLocation, new THREE.Vector3(0,-1,0));\n    var _ground = window.game.scene.ripplePlane.object3D;    \n    var _intersects = raycaster.intersectObject(_ground, true)\n    if(_intersects.length == 0) {\n      this.isBelowGround = true;\n      \n      if (this.isAboveGround) {\n        let worldLocation = this.getWorldPosition();\n        window.game.impact(worldLocation, this.velocity.length(), this.index ? \"right\" : \"left\");\n        console.log(\"Just went below ground\");\n      }\n      this.isAboveGround = false;\n      \n    } else {\n      this.isAboveGround = true;\n      this.isBelowGround = false;\n    }\n  }\n}\n\nlet transformPoint = function( vector ) {\n  vector.x = ( vector.x + 1.0 ) / 2.0;\n  vector.y = ( vector.y / 2.0 );\n  vector.z = ( vector.z + 1.0 ) / 2.0;\n  return vector;\n};\n\nmodule.exports = Controller;\n\n\n// WEBPACK FOOTER //\n// ./app/game/vr-controller.js","/* global THREE */\nimport CANNON from 'cannon';\nimport MathHelpers from '../util/MathHelpers';\nimport Actor from '../core/Actor';\nimport Sheep from './Sheep';\n\nclass Game extends Actor {\n  constructor(scene, world) {\n    super(scene,world);\n    this.scene = scene;\n    this.world = world;\n    \n    this.score = 0;\n    this.timeRemaining = 60;\n\n    this.gameStart = false;\n    this.gameOver = false;\n    \n    this.initialized = false;\n    this.initializedTime = 2.0;\n    this.initializedCount = 0;\n    \n    this.impactConfig = {\n      scalar: 2000.0,\n        yBaseForce: 8000.0,\n      maxRange: 2,\n      forceThreshold: 1.0\n    };\n    \n  }\n  \n  impact(vector3ImpactLocation, floatScale, hand) {\n    // floatScale = Math.min(floatScale, 0.0015);\n    vector3ImpactLocation.y = 0;\n    \n    if (!this.initialized) return;\n    \n    \n    if(!this.gameStart)\n    {\n      this.scene.beginGame();\n      this.gameStart = true;\n    }\n\n    let tickables = this.scene.tickingActors;\n    for (let i = 0; i < tickables.length; i++) {\n      let ticker = tickables[i];\n      if (!ticker instanceof Sheep || !ticker.body) continue;\n      \n      let _objectPos = new THREE.Vector3(ticker.body.position.x, 0, ticker.body.position.z); //vec3\n      let _diff = _objectPos.clone().sub(vector3ImpactLocation);\n      \n      if (_diff.length() > this.impactConfig.maxRange) continue;\n      \n      let _distanceScale = Math.abs((_diff.length() / this.impactConfig.maxRange) - 1) * floatScale;\n      // _distanceScale = 1/(Math.pow(_distanceScale, 2));\n      \n      //let _force = _diff.clone().normalize().multiplyScalar(_distanceScale).multiplyScalar(this.impactConfig.scalar);\n      // Scale forward force\n      let _force = _diff.clone().normalize().multiplyScalar(_distanceScale).multiplyScalar(this.impactConfig.scalar);\n      \n      // Set and scale height\n      _force.y = this.impactConfig.yBaseForce * _distanceScale;\n      console.log(\"FORCE: \", _force);\n      \n      //console.log(_force.length())\n      if (_force.length() < this.impactConfig.forceThreshold) continue;\n      \n      //let force = new CANNON.Vec3(_force.x,Math.abs(_force.y) * this.impactConfig.yScalar,_force.z);\n      let force = new CANNON.Vec3(_force.x, _force.y,_force.z);\n      if (ticker instanceof Sheep) {\n        ticker.bump(force, vector3ImpactLocation);\n      }\n    }\n\n    if (this.scene.ripplePlane) {\n      let impact_amt = (1.0 - (1.0/(Math.abs(floatScale * 1000) + 1)));\n      this.scene.ripplePlane.acceptPunch(vector3ImpactLocation, hand, impact_amt);\n    }\n\n  }\n\n  incrementScore()\n  {\n    if(!this.gameOver)\n    {\n      this.score++;\n      this.scene.scoreSign.setNumber( this.score );\n    }\n  }\n\n  updateTime(delta)\n  {\n    if (!this.gameStart) return; \n    this.timeRemaining -= delta;\n    this.timeRemaining = Math.max(0, this.timeRemaining);\n    var _secondsRemaining = Math.floor(this.timeRemaining);\n    this.scene.timeSign.setNumber( _secondsRemaining );\n\n    if(this.timeRemaining <= 0)\n    {\n      if(!this.gameOver)\n      {\n        this.gameOver = true;\n        this.scene.timeSign.setMessage(\"Restarting\")\n        this.timeRemaining = 10;\n      }\n      else\n      {\n        // let refresh = function () {\n        //   window.location.reload(false); \n        // }\n        // setTimeout(refresh, 0);\n      }\n    }\n  }\n  \n  tick(delta) {\n    super.tick(delta);\n    this.updateTime(delta);\n    \n    this.initializedCount += delta;\n    if (this.initializedCount >= this.initializedTime) {\n      this.initialized = true;\n    }\n  }\n}\n\nmodule.exports = Game;\n\n\n\n// WEBPACK FOOTER //\n// ./app/game/Game.js","/* global THREE */\nimport CANNON from 'cannon';\n\n\nvar MathHelpers = {};\n\nMathHelpers.threeVec3ToCannonVec3 = function (threeVec3) {\n  return new CANNON.Vec3(threeVec3.x, threeVec3.y, threeVec3.z);\n}\n\nMathHelpers.cannonVec3ToThreeVec3 = function (cannonVec3) {\n  return new THREE.Vector3(cannonVec3.x, cannonVec3.y, cannonVec3.z);\n}\n\n\nmodule.exports = MathHelpers;\n\n\n// WEBPACK FOOTER //\n// ./app/util/MathHelpers.js","/* global THREE */\n\nclass Actor {\n  constructor(scene, world) {\n    \n    this.ticks = false;\n    \n    // THREE.js\n    this.geometry = null;\n    this.material = null;\n    this.mesh = null;\n    this.object3D = new THREE.Object3D();\n    this.object3D.name = this.constructor.name;\n    // Cannon.js\n    this.physicsEnabled = false;\n    this.mass = null;\n    this.body = null;\n    this.shape = null;\n    \n    this.hackyYOffset = 0;\n    \n    // debug lines\n    this.lines = [];\n  }\n  \n  tick(delta) {\n    this.clearLines();\n    this.syncCollisionBodyAndRenderable();\n  }\n  \n  destroy() {\n    delete this;\n  }\n  \n  beginPlay() {\n    \n  }\n\n  randRange(min,max)\n  {\n      return Math.floor(Math.random()*(max-min+1)+min);\n  }\n\n  randFloatRange(min,max)\n  {\n      return Math.random()*(max-min+1)+min;\n  }\n\n  getPosition()\n  {\n    return this.object3D.position.clone();\n  }\n\n  getForwardVector()\n  {\n    var _currentPos = this.object3D.position.clone();\n    var _currentRot = this.object3D.rotation.clone();\n\n    var _originVect = new THREE.Vector3(1,0,0);\n\n    var _fwdX = _originVect.x * Math.cos(_currentRot.y);\n    var _fwdZ = _originVect.x * Math.sin(_currentRot.y);\n\n    var forwardVect = new THREE.Vector3(_fwdX,0,-_fwdZ);\n\n    return forwardVect;\n  }\n  \n  syncCollisionBodyAndRenderable () {\n    if (!this.body) return;\n    \n    if (this.physicsEnabled) {\n    this.object3D.position.copy(this.body.position);\n    this.object3D.position.y = this.object3D.position.y - this.hackyYOffset;\n    this.object3D.quaternion.copy(this.body.quaternion);\n    } else if (!this.physicsEnabled) {\n      this.body.position.copy(this.object3D.position);\n      this.body.quaternion.copy(this.object3D.quaternion);\n    }\n  }\n\n  clearLines()\n  {\n    for(var i = 0; i < this.lines.length; i++)\n    {\n      this.scene.remove(this.lines[i]);\n    }\n  }\n\n  draweLine(start, end, color)\n  {\n    var material = new THREE.LineBasicMaterial({\n      color: color\n    });\n\n    var geometry = new THREE.Geometry();\n    geometry.vertices.push(\n      start,\n      end\n    );\n\n    var _line = new THREE.Line( geometry, material ); \n    this.lines[this.lines.length] = _line;\n    this.scene.add( _line );\n  }\n\n  clamp(val, min, max)\n  {\n    return Math.min(Math.max(min, val), max);\n  }  \n}\n\nmodule.exports = Actor;\n\n\n// WEBPACK FOOTER //\n// ./app/core/Actor.js","/* global THREE */\nimport Actor from '../core/Actor';\nimport CANNON from 'cannon';\nimport FSM from './FSM';\nimport MathHelpers from '../util/MathHelpers';\n\n\nclass Sheep extends Actor {\n  constructor(scene, world) {\n    super(scene, world);\n    this.ticks = true;\n    //this.object3D.scale.set(0.1,0.1,0.1);\n\n    // this.hackyYOffset = 0.56;\n    this.lastPosition = new THREE.Vector3();\n    this.landedTimer = 0.0;\n    this.landedMax = 2.0;\n    \n    this.physicsEnabled = false;\n    this.totalScale = 0.075;\n    this.physicsScale = new THREE.Vector3(1.0, 0.7, 0.5);\n    \n    var self = this;\n    this.scene = scene;\n    \n    var loader = new THREE.OBJLoader();\n    loader.setPath('./models/obj/sheep-v2/');\n    \n    var textures = ['sheepDiffuse.png', 'sheepDiffuseBlack.png', 'sheepDiffuseBW.png', 'sheepDiffuseWhite.png', 'sheepDiffuseZombie.png']\n    var texIndex = this.randRange(0, textures.length - 1);\n\n    loader.load('sheep.obj', function(object) {\n      var loader = new THREE.TextureLoader();\n      loader.setPath('./models/obj/sheep-v2/');\n      \n      var sheepMesh = object.children[0];\n      sheepMesh.material.map = loader.load( \n        textures[texIndex]\n      );\n      /*\n      sheepMesh.material.specularMap = loader.load(\n        'sheepSpecularMap.png'\n      );\n*/\n      let mesh = object.clone();\n      mesh.castShadow = true;\n      mesh.receiveShadow = true;\n      mesh.position.set(0, -0.3*self.totalScale, 0);\n      mesh.scale.set(self.totalScale, self.totalScale, self.totalScale);\n      // mesh.rotation.set(-Math.PI/2, Math.PI,0);\n      self.object3D.add(mesh);\n    });\n    \n    this.shape = new CANNON.Box(new CANNON.Vec3((this.physicsScale.x * this.totalScale)/2,(this.physicsScale.y * this.totalScale)/2,(this.physicsScale.z * this.totalScale)/2));\n    let collisionMesh = new THREE.Mesh(\n      new THREE.BoxGeometry( this.physicsScale.x * this.totalScale, this.physicsScale.y * this.totalScale, this.physicsScale.z * this.totalScale),\n      new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: true } )\n    );\n    // this.object3D.add(collisionMesh);\n    this.mass = 5;\n    this.body = new CANNON.Body({\n      mass: this.mass\n    });\n    this.body.addShape(this.shape);\n\n    this.pen = scene.pen;\n    this.bIsInPen = false;\n\n    this.object3D.position.x = this.getRandStart();\n    this.object3D.position.y = 2.8;\n    this.object3D.position.z = this.getRandStart();\n\n    console.log(this.object3D.position);\n\n    this.wanderRange = 0.2\n\n    this.velocity = new THREE.Vector3(0,0,0);\n\n    this.brain = new FSM();\n    this.brain.setState(this.wander.bind(this));    \n\n    this.grazeTimer = 0;\n    this.newDestTimer = 0;\n    this.limitInState = this.randFloatRange(2,5);\n    this.nextDestTimeRange = this.randFloatRange(2,5);\n\n    this.destinationRange = 0.2;\n\n    this.accel = 0.005;\n    this.speed = 0;\n\n    this.maxSpeed = 0.075;\n    this.rotationRate = 1;\n\n    this.targetPos = this.getNewTargetPos(this.wanderRange, this.wanderRange);\n\n    this.raycaster = new THREE.Raycaster();\n\n    scene.add(this.object3D);\n    world.addBody(this.body);\n\n    this.scene = scene;\n  }\n\n  getRandStart()\n  {\n    var _randValue = Math.random();\n    if( _randValue <= this.pen.radius)\n    {\n      return this.getRandStart();\n    }\n    else if( Math.random() >= 0.5 )\n    {\n      return -_randValue;\n    }\n    else\n    {\n      return _randValue;\n    }\n  }\n\n  checkIsInPen()\n  {\n      var _sheepPos = this.getPosition();\n      var _penPos = this.pen.getPosition()\n      var _dist = _penPos.sub(_sheepPos).length();\n      if (_dist < this.pen.radius)\n      {\n        this.setPenned();        \n        window.game.incrementScore();\n      }\n  }\n\n  tick(delta)\n  {\n    super.tick(delta);\n    \n    this.brain.tick(delta);\n    this.updateTransform(delta);   \n\n\n    if(!this.bIsInPen)\n    {\n      this.checkIsInPen(); \n    }\n\n    var _currentBodyPos =MathHelpers.cannonVec3ToThreeVec3(this.body.position);\n    // walked off the edge\n    if( !this.physicsEnabled )\n    {\n      _currentBodyPos.y = 0 ;\n      var _distToCenter = _currentBodyPos.sub(new THREE.Vector3(0,0,0)).length();\n      if(_distToCenter > 1.48)\n      {\n        this.physicsEnabled = true;    \n        this.body.velocity = new CANNON.Vec3(0,0,0);\n        this.body.angularVelocity = new CANNON.Vec3(0,0,0); \n      }\n    }  \n    else\n    {\n      var _rayCastOrigin = _currentBodyPos.clone().add(new THREE.Vector3(0,0.01,0));\n      this.raycaster.set(_rayCastOrigin, new THREE.Vector3(0,-0.02,0));    \n      \n\n      var _ground = window.game.scene.ripplePlane.object3D;    \n      var _intersects = this.raycaster.intersectObject(_ground, true)\n      if(_intersects.length <= 0)\n      {\n        var _currentHeight = this.body.position.clone().y;\n        // If we've fallen off the table, respawn\n        if( _currentHeight <= -2 )\n        {\n          this.body.position.x = this.getRandStart();\n          this.body.position.y = 5;\n          this.body.position.z = this.getRandStart();\n          this.body.velocity = new CANNON.Vec3(0,-.1,0);\n          this.body.angularVelocity = new CANNON.Vec3(0,0,0);\n        }   \n      }\n      else\n      {\n        this.checkIfLanded(delta);  \n      }      \n    }\n  }\n  \n  checkIfLanded (delta) {\n    let _currentPosition = MathHelpers.cannonVec3ToThreeVec3(this.body.position);\n    \n    let _diff = _currentPosition.clone().sub(this.lastPosition);\n    \n    let velocity = _diff.length() * delta;\n    \n    if (velocity < .05) {\n      this.landedTimer += delta;\n      if (this.landedTimer >= this.landedMax) {\n        this.physicsEnabled = false;\n        this.object3D.rotation.set(0,0,0);\n        this.body.velocity = new CANNON.Vec3(0,0,0);\n        this.body.angularVelocity = new CANNON.Vec3(0,0,0); \n        this.landedTimer = 0;\n      }\n    }\n    this.lastPosition = MathHelpers.cannonVec3ToThreeVec3(this.body.position);\n  }\n  \n  bump (forceVector, sourceVector) {\n    if(!this.bIsInPen)\n    {\n      this.landedTimer = 0;\n      this.physicsEnabled = true;\n      this.body.applyImpulse(forceVector,this.body.position.clone());\n    }\n  }\n\n  wander(delta)\n  {\n    var _currentPos = this.getPosition();\n    var _targetPos = this.targetPos.clone();\n    var _distance =  _targetPos.distanceTo(_currentPos);  \n\n    this.newDestTimer += delta;\n    if( this.newDestTimer > this.nextDestTimeRange )\n    {\n      this.targetPos = this.getNewTargetPos(this.wanderRange, this.wanderRange);\n      this.nextDestTimeRange = this.randFloatRange(2,5);\n      this.newDestTimer = 0;\n    } \n\n    if(_distance <= this.destinationRange)\n    {\n      this.speed = 0;\n      this.brain.setState(this.graze.bind(this));\n    }\n  }\n\n  graze(delta)\n  {\n    var _currentPos = this.getPosition();\n    var _targetPos = this.targetPos.clone();\n    // We're Grazing\n    var _distance =  _targetPos.distanceTo(_currentPos);    \n    if(_distance <= this.destinationRange)\n    {\n      this.grazeTimer += delta;\n      this.speed = 0;\n    }\n\n    this.newDestTimer += delta;\n    if( this.newDestTimer > this.nextDestTimeRange )\n    {\n        this.targetPos = this.getNewTargetPos(2, 2);\n        this.newDestTimer = 0;\n        this.nextDestTimeRange = this.randFloatRange(2,6);\n    } \n\n    if(this.grazeTimer > this.limitInState)\n    {\n      this.targetPos = this.getNewTargetPos(2, 2); \n      this.limitInState = this.randFloatRange(4,8);\n      this.grazeTimer = 0;\n      this.brain.timeInState = 0;\n      this.speed = 0;\n    }\n  }\n\n  setPenned()\n  {\n    this.bIsInPen = true;\n    this.targetPos = this.getPenTargetPos();\n    this.newDestTimer = 0;\n    this.nextDestTimeRange = this.randFloatRange(2,6);\n    this.brain.setState(this.penned.bind(this));\n    this.maxSpeed = this.maxSpeed / 2.0;\n  }\n\n  penned(delta)\n  {\n    this.newDestTimer += delta;\n    if( this.newDestTimer > this.nextDestTimeRange )\n    {\n        this.newDestTimer = 0;\n        this.nextDestTimeRange = this.randFloatRange(2,4);\n        this.targetPos = this.getPenTargetPos();\n    } \n  }\n\n  updateTransform(delta)\n  {\n    var _targetPos = this.targetPos.clone();\n    var _currentPos = this.getPosition();\n\n    // Handle Position\n    var _fwdVect = this.getForwardVector();\n\n    // Handle Rotation\n    var _direction = _targetPos.clone().sub(_currentPos).normalize();  \n    var _dotProd = _fwdVect.clone().dot(_direction);\n    var _theta = Math.acos(_dotProd);\n\n    // Get the destination angle\n    var _destDotProd = new THREE.Vector3(1,0,0).dot(_direction);\n    var _destTheta = Math.acos(_destDotProd);\n    if(_direction.z > 0)\n    {\n      _destTheta = (2 * Math.PI) - _destTheta;      \n    }\n\n    // Ensure we do not use negative angles\n    if(this.object3D.rotation.y < 0)\n    {\n        this.object3D.rotation.y += (2 * Math.PI);\n    }\n\n    // Ensure we do not cross over 2 pi radians\n    var _yaw = this.object3D.rotation.clone().y % (2 * Math.PI);\n\n    // Get whether to go clockwise or counter clockwise\n    var _angleDif = _yaw - _destTheta;\n    var _absDif = Math.abs(_angleDif);   \n    \n    var _finalRotRate = this.rotationRate;      \n    if( this.brain.timeInState > 6 )\n    {\n      _finalRotRate = 2;\n    }\n\n    _finalRotRate = _finalRotRate * delta;\n    if(_angleDif > 0.0 && _absDif <= Math.PI)\n    {\n        _finalRotRate *= -1;  \n    }\n    else if(_angleDif < 0.0 && _absDif > Math.PI)\n    {\n        _finalRotRate *= -1;\n    }\n\n    if(_theta > 0.01)\n    {\n      this.object3D.rotation.y += _finalRotRate;\n    }\n\n    // Update Position\n    var _distance =  _targetPos.distanceTo(_currentPos);\n    var _velocity = new THREE.Vector3(0,0,0);\n    if(_distance > this.destinationRange)\n    {\n      this.speed += this.accel;\n    }\n\n    this.speed = this.clamp(this.speed, 0, this.maxSpeed);\n    _velocity = _fwdVect.clone().multiplyScalar(this.speed);\n    _velocity.multiplyScalar(delta);\n\n    this.object3D.position.add(_velocity);\n  }\n\n  // Return the next target position\n  getNewTargetPos(x, z)\n  {\n    var _currentPos = this.getPosition();\n    var _penPos = this.pen.getPosition();\n\n    var _difference = _penPos.clone().sub(_currentPos);\n    var _distance = _difference.length();\n    if(_distance >= 0.7)\n    {\n      var randX = this.randFloatRange(-x,x);\n      var randZ = this.randFloatRange(-z,z);\n      var offset = new THREE.Vector3(randX,0,randZ);\n      var _currentPos = this.getPosition();\n      var newTarget = _currentPos.add(offset);\n      return newTarget;\n    }\n    else\n    {\n      var _penDir = _difference.normalize().multiplyScalar(-1);\n      var randX = this.randFloatRange(0,z);\n      var randZ = this.randFloatRange(0,z);\n      var _cPerpVect = new THREE.Vector3(_penDir.z, 0, -_penDir.x).multiplyScalar(randX);\n      var _ccPerpVect = new THREE.Vector3(-_penDir.z, 0, _penDir.x).multiplyScalar(randZ);\n\n      var _newDir = _penDir.add(_cPerpVect).add(_ccPerpVect);\n      var newTarget = _currentPos.add(_newDir);\n      return newTarget;\n    }\n  } \n\n  // Return the next target position\n  getPenTargetPos()\n  {\n    var _penPos = this.pen.getPosition();\n    var _rad = this.pen.radius * 0.5;\n    var randX = this.randFloatRange(-_rad,_rad);\n    var randZ = this.randFloatRange(-_rad,_rad);\n    var offset = new THREE.Vector3(randX,0,randZ);\n    var newTarget = _penPos;//.add(offset);\n\n    return newTarget;\n  }\n\n  // Draw forward and destination lines\n  drawDebugLines()\n  {\n    var _targetPos = this.targetPos.clone();\n    var _currentPos = this.getPosition();\n\n    var _fwdVect = this.getForwardVector();\n    _fwdVect.add(_currentPos);\n\n    this.draweLine(_currentPos, _targetPos, 0x00ff00);\n    this.draweLine(_currentPos, _fwdVect, 0x0000ff);\n  }\n\n}\n\nmodule.exports = Sheep;\n\n\n// WEBPACK FOOTER //\n// ./app/game/Sheep.js","/* global THREE */\r\n\r\nclass FSM {\r\n  constructor() \r\n  {\r\n  \tthis.activeState;\r\n  \tthis.timeInState;\r\n  }\r\n\r\n  setState(state)\r\n  {\r\n  \tthis.activeState = state;\r\n    this.timeInState = 0;\r\n  }\r\n\r\n  tick(delta)\r\n  {\r\n  \tif(this.activeState != null)\r\n  \t{\r\n  \t\tthis.activeState(delta);\r\n    \tthis.timeInState += delta;\r\n  \t}\r\n  }\r\n}\r\n\r\nmodule.exports = FSM;\n\n\n// WEBPACK FOOTER //\n// ./app/game/FSM.js","/* global THREE */\nimport Actor from '../core/Actor';\nimport CANNON from 'cannon';\n\n\nclass Sheep extends Actor {\n  constructor(scene, world) {\n    super(scene, world);\n    \n    var self = this;\n    \n    \n    var loader = new THREE.OBJLoader();\n    loader.setPath('./models/obj/skybox/');\n    \n    \n    loader.load('skysphere.obj', function(object) {\n      var loader = new THREE.TextureLoader();\n      loader.setPath('./models/obj/skybox/');\n      \n      var skybox = object.children[0];\n      skybox.material.map = loader.load(\n        'skyboxDiffuse.png'\n      );\n      \n      self.object3D.add(skybox.clone());\n    });\n    \n    scene.add(this.object3D);\n  }\n}\n\nmodule.exports = Sheep;\n\n\n// WEBPACK FOOTER //\n// ./app/game/Skybox.js","/* global THREE */\nimport Actor from '../core/Actor';\nimport CANNON from 'cannon';\n\n\nclass GroundPlane extends Actor {\n  constructor(scene, world) {\n    super(scene, world);\n    this.physicsScale = {\n      x: 2.1,\n      y: 1,\n      z: 2.1\n    };\n    this.shape = new CANNON.Box(new CANNON.Vec3(this.physicsScale.x/2,this.physicsScale.y/2,this.physicsScale.z/2));\n    // this.shape = new CANNON.Cylinder(this.physicsScale.x/2,this.physicsScale.z/2,this.physicsScale.y, 8);\n    \n    let collisionMesh = new THREE.Mesh(\n      new THREE.BoxGeometry( this.physicsScale.x, this.physicsScale.y, this.physicsScale.z),\n      new THREE.CylinderGeometry(this.physicsScale.x/2, this.physicsScale.z/2 , this.physicsScale.y),\n      new THREE.MeshStandardMaterial( { color: 0x777777, roughness: 1.0, metalness: 0, wireframe: false } )\n    );\n    collisionMesh.receiveShadow = true;\n    //this.object3D.add(collisionMesh);\n    this.mass = 0;\n    this.body = new CANNON.Body({\n      mass: this.mass\n    });\n    this.body.addShape(this.shape);\n    // this.body.quaternion.setFromAxisAngle(new CANNON.Vec3(0,1,0),Math.PI/2);\n    world.addBody(this.body);\n    scene.add(this.object3D);\n  }\n}\n\nmodule.exports = GroundPlane;\n\n\n// WEBPACK FOOTER //\n// ./app/game/GroundPlane.js","/* global THREE */\r\nimport Actor from '../core/Actor';\r\nimport CANNON from 'cannon';\r\n\r\nclass Pen extends Actor {\r\n  \tconstructor(scene, world, center) {\r\n    \tsuper(scene, world);\r\n\t\t\r\n\t\tthis.scene = scene;\r\n    \tvar self = this;\r\n\r\n\t    var loader = new THREE.OBJLoader();\r\n\t    loader.setPath('./models/obj/fence/');\r\n\t    \t    \r\n\t    loader.load('fence_v2.obj', function(object) {\r\n\t      var loader = new THREE.TextureLoader();\r\n\t      loader.setPath('./models/obj/fence/');\r\n\t      \r\n      \t\tvar penMesh1 = object.children[0];\r\n      \t\tvar penMesh2 = object.children[1];\r\n      \t\tvar penMesh3 = object.children[2];\r\n\t\t\tself.object3D.add(penMesh1);\r\n\t\t\tself.object3D.add(penMesh2);\r\n\t\t\tself.object3D.add(penMesh3);\r\n\r\n\t\t\tpenMesh1.material.map = loader.load( \r\n\t\t\t'fenceDiffuse.png'\r\n\t\t\t);\r\n\t\t\tpenMesh1.material.specularMap = loader.load(\r\n\t\t\t'fenceSpecular.png'\r\n\t\t\t);\r\n\t\t    penMesh1.castShadow = true;\r\n\t\t    penMesh1.receiveShadow = true;\r\n\r\n\t\t\tpenMesh2.material.map = loader.load( \r\n\t\t\t'fenceDiffuse.png'\r\n\t\t\t);\r\n\t\t\tpenMesh2.material.specularMap = loader.load(\r\n\t\t\t'fenceSpecular.png'\r\n\t\t\t);\r\n\t\t    penMesh2.castShadow = true;\r\n\t\t    penMesh2.receiveShadow = true;\r\n\r\n\t\t\tpenMesh3.material.map = loader.load( \r\n\t\t\t'fenceDiffuse.png'\r\n\t\t\t);\r\n\t\t\tpenMesh3.material.specularMap = loader.load(\r\n\t\t\t'fenceSpecular.png'\r\n\t\t\t);\r\n\t\t    penMesh3.castShadow = true;\r\n\t\t    penMesh3.receiveShadow = true;\r\n/*\r\n\t\t\tlet collisionMesh = new THREE.Mesh(\r\n\t\t\t      new THREE.SphereGeometry( self.radius, 6, 6 ),\r\n\t\t\t      new THREE.MeshBasicMaterial( { color: 0x000000, wireframe: true } )\r\n\t\t\t    );\r\n\t\t\tself.object3D.add(collisionMesh);\r\n\t\t\t*/\r\n\r\n\t    });\r\n\r\n\t\tthis.object3D.position.set(center.x, center.y, center.z);\r\n\t\tvar _scale = 0.05;\r\n    \tthis.object3D.scale.set(_scale,_scale,_scale);\r\n\t\tthis.radius = 6 * _scale;\r\n\r\n\r\n\t    //this.body.addShape(this.shape);\r\n\t    //world.addBody(this.body);\r\n    \r\n\t    scene.add(this.object3D);\r\n\r\n\t    console.log(center);\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = Pen;\n\n\n// WEBPACK FOOTER //\n// ./app/game/Pen.js","/* global THREE */\r\nimport Actor from '../core/Actor';\r\n\r\nclass DynamicSign extends Actor {\r\n  constructor(scene, world, texture_idx) {\r\n    super(scene, world);\r\n\r\n    console.log(\"before loader load\");\r\n    var self = this;\r\n    \r\n    console.log(self.object3D);\r\n\r\n    scene.add(this.object3D);\r\n    this.width = window.innerWidth, this.height = window.innerHeight / 2;\r\n    this.size = 256;\r\n    \r\n    this.canvas = document.createElement( 'canvas' );\r\n    this.canvas.width = 128;\r\n    this.canvas.height = 128;\r\n    this.message = \"Sheep Left\";\r\n    this.number = \"0\";\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    var loader = new THREE.OBJLoader();\r\n    loader.setPath('./models/obj/sign/');\r\n    \r\n    \r\n    loader.load('sign.obj', function(object) {\r\n      var loader = new THREE.TextureLoader();\r\n      loader.setPath('./models/obj/sign/');\r\n      \r\n      var signMesh = object.children[0];\r\n\r\n      signMesh.material.materials[0].map = loader.load(\r\n        'wood_Base_Color.png'\r\n      );\r\n\r\n      self.texture = new THREE.Texture(self.canvas);\r\n      signMesh.material.materials[1].map = self.texture;\r\n      self.texture.needsUpdate = true;\r\n      \r\n      self.object3D.add(signMesh.clone());\r\n      self.object3D.scale.set(10,10,10);\r\n\r\n    });\r\n  }\r\n\r\n  changeCanvas() {\r\n    this.ctx.font = '18pt Arial';\r\n    this.ctx.fillStyle = 'red';\r\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    this.ctx.fillStyle = 'white';\r\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n    this.ctx.fillStyle = 'black';\r\n    this.ctx.textAlign = \"center\";\r\n    this.ctx.textBaseline = \"middle\";\r\n    this.ctx.fillText(this.message, this. canvas.width / 2, this.canvas.height / 3);\r\n    this.ctx.font = '40pt Arial';\r\n    this.ctx.fillText(this.number, this. canvas.width / 2, this.canvas.height / (1.5));\r\n  }\r\n\r\n  setMessage( value )\r\n  {\r\n    this.message = value;\r\n    if(this.texture)\r\n    {\r\n      this.texture.needsUpdate = true;  \r\n    }    \r\n  }\r\n\r\n  setNumber( value )\r\n  {\r\n    this.number = value;\r\n    this.changeCanvas();\r\n    if(this.texture)\r\n    {\r\n      this.texture.needsUpdate = true;  \r\n    }    \r\n  }\r\n\r\n  tick(delta)\r\n  {\r\n    super.tick(delta);\r\n    \r\n    this.changeCanvas();\r\n  }\r\n}\r\n\r\nmodule.exports = DynamicSign;\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/game/DynamicSign.js","/* global THREE */\nimport Actor from '../core/Actor';\nimport CANNON from 'cannon';\nimport waves_vert from './shaders/waves.vert';\nimport waves_frag from './shaders/waves.frag';\n\nclass RipplePlane extends Actor {\n  constructor(scene, world) {\n    super(scene, world);\n    \n    this.WIDTH = 64;\n    this.NUM_TEXELS = this.WIDTH * this.WIDTH;\n    this.BOUNDS = 10;\n    this.BOUNDS_HALF = this.BOUNDS * 0.5;\n    this.timeLeft = 0;\n\n    this.geometry = new THREE.PlaneBufferGeometry(\n      this.BOUNDS,\n      this.BOUNDS,\n      this.WIDTH - 1,\n      this.WIDTH - 1\n    );\n\n    this.maxRippleSize = 400.0;\n\n    this.material = new THREE.ShaderMaterial({\n      uniforms: {\n          rippleOriginLeft: { type: '2fv', value: new THREE.Vector2(1000, 1000) },\n          rippleOriginRight: { type: '2fv', value: new THREE.Vector2(1000, 1000) },\n          timeLeft: { type: 'f', value: 0 },\n          timeRight: { type: 'f', value: 0 },\n          rippleSizeLeft: { type: 'f', value: this.maxRippleSize },\n          rippleSizeRight: { type: 'f', value: this.maxRippleSize },\n          falloff: { type: 'f', value: 10.0 }\n        },\n      vertexShader: waves_vert,\n      fragmentShader: waves_frag\n\n    });\n\n    var loader = new THREE.OBJLoader();\n    loader.setPath('./models/obj/island/');\n    var self = this;\n\n    loader.load('island_2.obj', function(object) {\n      var island = object.children[0];\n      island.geometry.computeFaceNormals();\n      island.geometry.computeVertexNormals();\n      island.material = self.material;\n      \n      self.object3D.add(island.clone());\n      scene.add(self.object3D);\n      //self.object3D.scale.set(0.1, 0.1, 0.1);\n    });\n\n/*\n    this.object3D = new THREE.Mesh(\n      this.geometry, \n      this.material\n    );\n\n   this.object3D.rotation.x = -Math.PI / 2;\n   this.object3D.matrixAutoUpdate = false;\n   this.object3D.updateMatrix();\n\n    scene.add(this.object3D);\n*/\n  }\n\n  acceptPunch(punch_location, hand, power) {\n    punch_location = punch_location.clone().multiplyScalar(0.3);\n    punch_location = new THREE.Vector2(punch_location.x, -punch_location.z);\n    // punch_location = new THREE.Vector2(0,0);\n    console.log(punch_location);\n\n    \n    if (hand == \"left\") {\n      this.material.uniforms[\"rippleOriginLeft\"] = { \n        type: '2fv', \n        value: punch_location \n      };\n      this.material.uniforms[\"rippleSizeLeft\"] = { \n        type: 'f', \n        value: this.maxRippleSize * power\n      };\n      this.timeLeft = 0;\n    } else {\n      this.material.uniforms[\"rippleOriginRight\"] = { \n        type: '2fv', \n        value: punch_location \n      };\n      this.material.uniforms[\"rippleSizeRight\"] = { \n        type: 'f', \n        value: this.maxRippleSize * power\n      };\n      this.timeRight = 0;\n    }\n  }\n\n  tick(delta) {\n    this.timeLeft += delta / 2;\n    this.timeRight += delta / 2;\n    this.material.uniforms.timeLeft = { \n      type: 'f', \n      value: this.timeLeft\n    };\n    this.material.uniforms.timeRight = { \n      type: 'f', \n      value: this.timeRight\n    };\n    super.tick(delta);\n  }\n}\n\nmodule.exports = RipplePlane;\n\n\n\n// WEBPACK FOOTER //\n// ./app/game/RipplePlane.js","module.exports = \"varying vec2 vUv;\\r\\nvarying float noise;\\r\\nvarying vec3 fNormal;\\r\\nvarying vec4 vColor;\\r\\n\\r\\nuniform vec2 rippleOriginLeft;\\r\\nuniform vec2 rippleOriginRight;\\r\\nuniform float rippleSizeLeft;\\r\\nuniform float rippleSizeRight;\\r\\nuniform float falloff;\\r\\n\\r\\nuniform float timeLeft;\\r\\nuniform float timeRight;\\r\\n\\r\\nvoid main() {\\r\\n  fNormal = normal;\\r\\n  vUv = uv;\\r\\n  noise = 0.0;\\r\\n  \\r\\n  vec2 distLeft = ((rippleOriginLeft + 0.5) - uv); \\r\\n  float distLeftSquare = distLeft.x * distLeft.x + distLeft.y * distLeft.y;\\r\\n  vec3 newPosition = position;\\r\\n  float radiusLeftOutside = timeLeft;\\r\\n  float radiusLeftInside = timeLeft - 0.09;\\r\\n  float falloffLeft = falloff * (1.0 + distLeftSquare);\\r\\n\\r\\n  vec2 distRight = ((rippleOriginRight + 0.5) - uv); \\r\\n  float distRightSquare = distRight.x * distRight.x + distRight.y * distRight.y;\\r\\n  float radiusRightOutside = timeRight;\\r\\n  float radiusRightInside = timeRight - 0.09;\\r\\n  float falloffRight = falloff * (1.0 + distRightSquare);\\r\\n\\r\\n  vColor = vec4(0.3, 0.5, 0.0, 1.0);\\r\\n  vec4 colorLeft = vec4(0.0);\\r\\n  vec4 colorRight = vec4(0.0);\\r\\n\\r\\n  vec3 offsetLeft = vec3(0.0, 0.0, 0.0);\\r\\n  vec3 offsetRight = vec3(0.0, 0.0, 0.0);\\r\\n\\r\\n  if ( distLeftSquare < radiusLeftOutside * radiusLeftOutside &&\\r\\n       distLeftSquare > radiusLeftInside * radiusLeftInside) {\\r\\n\\r\\n    offsetLeft = vec3(0.0, rippleSizeLeft / (falloffLeft * falloffLeft), 0.0);\\r\\n    colorLeft = vec4(30.0/vec3(falloffLeft * falloffLeft), 0.0);\\r\\n  }\\r\\n  if (distRightSquare < radiusRightOutside * radiusRightOutside &&\\r\\n      distRightSquare > radiusRightInside * radiusRightInside) {\\r\\n\\r\\n    offsetRight = vec3(0.0, rippleSizeRight / (falloffRight * falloffRight), 0.0);\\r\\n    colorRight = vec4(30.0/vec3(falloffRight * falloffRight), 0.0);\\r\\n  }\\r\\n\\r\\n  vColor = vColor + colorRight + colorLeft;\\r\\n\\r\\n  newPosition = newPosition + offsetLeft + offsetRight;\\r\\n\\r\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\\r\\n}\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/game/shaders/waves.vert\n// module id = 15\n// module chunks = 0","module.exports = \"varying vec2 vUv;\\r\\nvarying float noise;\\r\\nvarying vec3 fNormal;\\r\\nvarying vec4 vColor;\\r\\n\\r\\nuniform vec2 rippleOrigin;\\r\\nuniform float rippleSize;\\r\\n\\r\\nvoid main() {\\r\\n  vec3 light = vec3(1.0, 1.0, 1.0);\\r\\n  float dProd = max(0.0, dot(fNormal, light));\\r\\n\\r\\n  gl_FragColor = vec4(\\r\\n    vColor.x * dProd,\\r\\n    vColor.y * dProd,\\r\\n    vColor.z * dProd, \\r\\n    vColor.w\\r\\n  );\\r\\n\\r\\n}\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/game/shaders/waves.frag\n// module id = 16\n// module chunks = 0","/* global WEBVR */\n/* global THREE */\n\nimport CANNON from 'cannon';\nimport Sheep from './Sheep';\nimport Game from './Game';\nimport Skybox from './Skybox';\nimport GroundPlane from './GroundPlane';\nimport Physics from './Physics';\nimport Pen from './Pen';\nimport DynamicSign from './DynamicSign';\nimport Sign from './Sign';\nimport RipplePlane from './RipplePlane';\n\nclass Scene2 extends THREE.Scene {\n  constructor(renderer) {\n        super();\n        this.controls;\n        \n        renderer.setClearColor(0xf0f0f0, 1);\n\n        this.world = new CANNON.World();\n        this.world.gravity.set(0,-4.9,0);\n        this.world.broadphase = new CANNON.NaiveBroadphase();\n        this.world.solver.iterations = 10;\n\n        let camera = new THREE.PerspectiveCamera(\n          70,\n          window.innerWidth/window.innerHeight,\n          0.1,\n          10000\n        );\n        var listener = new THREE.AudioListener();\n\t\t    camera.add( listener );\n        camera.position.y = 10;\n        //camera.rotation.x = 10;\n        this.controls = new THREE.OrbitControls( camera, renderer.domElement );\n        this.controls.enableZoom = true;\n        this.controls.enableDamping = true;\n        this.controls.dampingFactor = 0.25;\n\n        this.tickingActors = [];\n        \n        this.add(camera);\n        this.camera = camera;\n        \n        this.add(new THREE.HemisphereLight(0x808080, 0x606060));\n        var light = new THREE.DirectionalLight(0xffffff);\n        light.position.set(0, 6, 0);\n        \n        light.castShadow = true;\n        light.shadow.camera.top = 2;\n        light.shadow.camera.bottom = -2;\n        light.shadow.camera.right = 2;\n        light.shadow.camera.left = -2;\n        \n        light.shadow.mapSize.set(4096, 4096);\n        this.add(light);\n\n        window.game = new Game(this, this.world);\n        this.tickingActors.push(window.game);\n\n        this.raycaster = new THREE.Raycaster();\n        this.mouse = new THREE.Vector2();\n\n        let skybox = new Skybox(this, this.world);\n\n        this.groundPlane = new GroundPlane(this, this.world);\n        this.groundPlane.object3D.position.set(0,1.7,0);\n        this.groundPlane.body.position.set(0,1.7,0);\n\n        this.ripplePlane = new RipplePlane(this, this.world);\n        this.tickingActors.push(this.ripplePlane);\n        this.ripplePlane.object3D.position.set(0,2.2,0);\n        this.ripplePlane.object3D.scale.set(0.06,0.06,0.06);\n      \n        this.pen = new Pen(this, this.world, new THREE.Vector3(0,2.18,0));\n\n        this.scoreSign = new DynamicSign(this, this.world);    \n        this.scoreSign.object3D.position.set(-2.2,0,-5);   \n        this.scoreSign.object3D.rotation.y = 0.3\n        this.scoreSign.setMessage(\"Score\");\n        this.scoreSign.setNumber( 0 );\n        this.tickingActors.push(this.scoreSign);\n        this.scoreSign.object3D.visible = false;\n\n        this.timeSign = new DynamicSign(this, this.world);    \n        this.timeSign.object3D.position.set(2.5,0,-5);\n        this.timeSign.object3D.rotation.y = -0.2\n        this.timeSign.setMessage(\"Time\");\n        this.timeSign.setNumber(window.game.timeRemaining);\n        this.tickingActors.push(this.timeSign);\n        this.timeSign.object3D.visible = false;\n\n        this.freezeFrameTimer = 0;\n        this.freezeFrameTime = 0;\n\n        this.signs = [];\n        var sign_count = 6;\n        for (var i = 0; i < sign_count; i++) {\n          this.signs[i] = new Sign(this, this.world, i);\n          var angle = -i * 2 * Math.PI / sign_count - Math.PI / 2;\n          this.signs[i].object3D.position.x = \n            8 * Math.cos(i * 2 * Math.PI / sign_count);\n          this.signs[i].object3D.position.z = \n            8 * Math.sin(i * 2 * Math.PI / sign_count);\n\n          this.signs[i].object3D.rotation.y = angle;\n        }\n\n        this.numSheep = 100;\n        for(var i=0; i<this.numSheep; i++)\n        {\n            var sheep = new Sheep(this, this.world);\n            sheep.object3D.position.y = 2.23;\n            this.tickingActors.push(sheep);\n        }    \n\n        this.bPause = false;\n        \n        document.body.onkeyup = (e)=>{\n            if(e.keyCode == 32){\n                console.log(\"I pressed spacebar\");\n                this.bPause = !this.bPause;\n            }\n            else if(e.keyCode == 87){     \n                for (let i = 0; i < this.tickingActors.length; i++) \n                {\n                    if(this.tickingActors[i].object3D.name == \"Sheep\")\n                    {\n                        this.tickingActors[i].object3D.position.set(_curPos);\n                        this.tickingActors[i].physicsEnabled = !this.tickingActors[i].physicsEnabled;\n                    }\n\n                }\n            }\n        }\n\n        document.body.onmousemove = (e)=>{\n\n            // calculate mouse position in normalized device coordinates\n            // (-1 to +1) for both components\n\n            this.mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n            this.mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n\n        }\n\n        document.body.onmousedown = (e)=>{\n            if(e.button == 0)\n            {\n                // update the picking ray with the camera and mouse position\n                this.raycaster.setFromCamera( this.mouse, this.camera );\n\n                // calculate objects intersecting the picking ray\n                var _intersects = this.raycaster.intersectObject( this.ripplePlane.object3D, true );\n                if(_intersects.length > 0)\n                {\n                    var _impactPoint = _intersects[ 0 ].point;\n                    window.game.impact(_impactPoint, 0.0008, \"right\");\n                }\n                //groundPlane\n            }\n        }\n    }\n  \n    beginGame() {\n        for (var key in this.signs) {\n            let sign = this.signs[key];\n            sign.object3D.visible = false;\n        }\n        this.scoreSign.object3D.visible = true;\n        this.timeSign.object3D.visible = true;\n    }\n\n\n    tick (delta) {\n        if(!this.bPause)\n        {\n            // this.world.step(delta);\n            this.world.step(1/60);\n            this.controls.update();\n            tickActors(this.tickingActors, delta);\n        }    \n      }\n}\n\nlet tickActors = function (actors, delta) {\nfor (let i = 0; i < actors.length; i++) {\n        if (actors[i].tick) {\n            actors[i].tick(delta);\n        }\n    }\n}\n\nmodule.exports = Scene2;\n\n\n// WEBPACK FOOTER //\n// ./app/game/Scene2.js","/* global THREE */\nimport Actor from '../core/Actor';\nimport CANNON from 'cannon';\n// import MathHelpers from '../utils/MathHelpers';\n\n\nclass Physics extends Actor {\n  constructor(scene, world) {\n    super(scene, world);\n    \n    this.ticks = true;\n    this.hackyYOffset = 0.56;\n    \n    // this.object3D.scale.set(1.0, 1.0,1.0);\n    this.physicsEnabled = false;\n    this.totalScale = 0.15;\n    this.physicsScale = new THREE.Vector3(1.0, 0.7, 0.5);\n    \n    var self = this;\n    \n    \n    var loader = new THREE.OBJLoader();\n    loader.setPath('./models/obj/sheep-v2/');\n    \n    \n    loader.load('sheep.obj', function(object) {\n      var loader = new THREE.TextureLoader();\n      loader.setPath('./models/obj/sheep-v2/');\n      \n      var sheepMesh = object.children[0];\n      sheepMesh.material.map = loader.load(\n        'sheepDiffuse.png'\n      );\n      // mesh.material.specularMap = loader.load(\n      //   'sheepSpecularMap.png'\n      // );\n      \n      let mesh = object.clone();\n      mesh.castShadow = true;\n      mesh.receiveShadow = true;\n      mesh.position.set(0, -0.3*self.totalScale, 0);\n      mesh.scale.set(self.totalScale, self.totalScale, self.totalScale);\n      // mesh.rotation.set(-Math.PI/2, Math.PI,0);\n      self.object3D.add(mesh);\n      // self.object3D.position.set(0,2,0);\n    });\n    \n    this.shape = new CANNON.Box(new CANNON.Vec3(this.physicsScale.x * this.totalScale,this.physicsScale.y * this.totalScale,this.physicsScale.z * this.totalScale));\n    let collisionMesh = new THREE.Mesh(\n      new THREE.BoxGeometry( this.physicsScale.x * this.totalScale, this.physicsScale.y * this.totalScale, this.physicsScale.z * this.totalScale),\n      new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: true } )\n    );\n    this.object3D.add(collisionMesh);\n    this.mass = 5;\n    this.body = new CANNON.Body({\n      mass: this.mass\n    });\n    this.body.addShape(this.shape);\n    // this.body.angularVelocity.set(0,10,0);\n    // this.body.angularDamping = 0.5;\n    \n    \n    scene.add(this.object3D);\n    world.addBody(this.body);\n  }\n  \n  tick(delta) {\n    super.tick(delta);\n    \n  }\n}\n\nmodule.exports = Physics;\n\n\n// WEBPACK FOOTER //\n// ./app/game/Physics.js","/* global THREE */\nimport Actor from '../core/Actor';\n\nclass Sign extends Actor {\n  constructor(scene, world, texture_idx) {\n    super(scene, world);\n\n    var signTextures = [\n      \"controllers.png\",\n      \"credits.png\",\n      \"gamePlay.png\",\n      \"gettingStarted.png\",\n      \"splash1.png\",\n      \"splash2.png\",\n    ];\n    \n    console.log(\"before loader load\");\n    var self = this;\n    \n    console.log(self.object3D);\n\n    scene.add(this.object3D);\n    this.width = window.innerWidth, this.height = window.innerHeight / 2;\n    this.size = 256;\n    \n    this.canvas = document.createElement( 'canvas' );\n    this.canvas.width = 128;\n    this.canvas.height = 128;\n    this.ctx = this.canvas.getContext('2d');\n\n    var loader = new THREE.OBJLoader();\n    loader.setPath('./models/obj/sign/');\n    \n    \n    loader.load('sign.obj', function(object) {\n      var loader = new THREE.TextureLoader();\n      loader.setPath('./models/obj/sign/');\n      \n      var signMesh = object.children[0];\n\n      signMesh.material.materials[0].map = loader.load(\n        'wood_Base_Color.png'\n      );\n      signMesh.material.materials[1].map = loader.load(\n        signTextures[texture_idx]\n      );\n      \n      self.object3D.add(signMesh.clone());\n      self.object3D.scale.set(10,10,10);\n\n    });\n    \n\n  }\n}\n\nmodule.exports = Sign;\n\n\n\n// WEBPACK FOOTER //\n// ./app/game/Sign.js"],"sourceRoot":""}